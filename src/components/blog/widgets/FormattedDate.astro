---
import { themeConfig } from '@/config';
import { formatDate } from '@/utils/date';
import type { FormattedDateProps } from '@/types';

const {
	date,
	format,
	context = 'default'
} = Astro.props as FormattedDateProps & { context?: 'list' | 'post' | 'default' };

// Ensure date is a Date object (in case it was serialized to a string)
const dateObj = date instanceof Date ? date : new Date(date);
---

<time
	datetime={dateObj.toISOString()}
	class={!themeConfig.date.dateOnRight &&
	(themeConfig.date.dateFormat === 'MONTH DAY YYYY' ||
		themeConfig.date.dateFormat === 'DAY MONTH YYYY') &&
	context === 'list'
		? 'date-left'
		: ''}
>
	<Fragment set:html={formatDate(dateObj, format)} />
</time>

<style>
	.date-left {
		display: inline-block;
		min-width: 86px;
		text-align: right;
	}
</style>
